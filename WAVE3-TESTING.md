# גל 3 – הנחיות בדיקה (Rate limiting, גודל body, Error Boundary, Health)

## מה השתנה

- **Rate limiting:** הגבלת בקשות לפי IP (בזיכרון).
  - **שליחת קוד אימייל:** עד 6 בקשות ב־10 דקות.
  - **התחברות / הרשמה / איפוס סיסמה:** עד 25 בקשות בדקה.
  - **סנכרון (סל, היסטוריה, פרופיל וכו'):** עד 80 בקשות בדקה.
  - חריגה → תגובה **429** עם הודעה "יותר מדי בקשות. נסה שוב בעוד דקה."
- **גודל body:** בקשות POST לסנכרון עם גוף מעל **1MB** מחזירות **413** ("גודל הנתונים חורג מהמגבלה").
- **Error Boundary:** אם קורה crash ב-React, מוצג מסך "אופס, משהו השתבש" עם כפתור "נסה שוב" ו"חזרה לדף הבית" במקום מסך לבן.
- **Health check:** **GET /api/health** מחזיר `{ ok: true, supabase: boolean, timestamp }` – מתאים לניטור ו-Vercel.

## בדיקות מומלצות

1. **שימוש רגיל** – התחברות, סנכרון, הוספת פריטים – אמור לעבוד כרגיל (המכסות גבוהות).
2. **Health:** פתח `https://האתר-שלך/api/health` – אמור להחזיר JSON עם `ok: true`.
3. **Error Boundary:** (אופציונלי) אם יש דרך לגרום לשגיאה ב-React – וודא שמופיע המסך עם "נסה שוב" ו"חזרה לדף הבית".
4. **429:** רק אם מישהו שולח המון בקשות מאותו IP – יופיע 429; משתמש רגיל לא אמור לראות.

אין צורך בהגדרות או משתני סביבה חדשים.
